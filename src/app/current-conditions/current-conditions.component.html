<div *ngIf="currentConditionsByZip() as currentConditions" class="current-conditions-container">
    <ng-container *ngIf="currentConditions.length > 0">
        <app-tabs-header>
            <ng-container *ngFor="let location of currentConditions; index as i">
                <app-tab title="{{location.data.name}} ({{location.zip}})"
                         [active]="activeTabIndex === i"
                         (tabActivated)="tabService.setActiveTab(i)"
                         (tabClosed)="locationService.removeLocation(location.zip)">
                </app-tab>
            </ng-container>
        </app-tabs-header>

        <app-tabs-body>
            <ng-container *ngFor="let location of currentConditions; index as i">
                <app-body-content *ngIf="tabService.activeTabIndex === i">
                    <div>
                        <h4>Current conditions: {{location.data.weather[0].main}}</h4>
                        <h4>Temperatures today:</h4>
                        <p>
                            Current {{location.data.main.temp | number:'.0-0'}}
                            - Max {{location.data.main.temp_max | number:'.0-0'}}
                            - Min {{location.data.main.temp_min | number:'.0-0'}}
                        </p>
                        <p>
                            <a [routerLink]="['/forecast', location.zip]">Show 5-day forecast for
                                {{location.data.name}}</a>
                        </p>
                    </div>
                    <div>
                        <img [src]="weatherService.getWeatherIcon(location.data.weather[0].id)">
                    </div>
                </app-body-content>
            </ng-container>
        </app-tabs-body>
    </ng-container>
</div>